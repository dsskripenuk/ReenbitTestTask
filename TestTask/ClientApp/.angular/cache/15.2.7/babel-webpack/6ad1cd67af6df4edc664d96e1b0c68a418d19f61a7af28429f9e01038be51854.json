{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nvar emailval = '';\nexport class HomeComponent {\n  getError(control) {\n    if (control.errors?.required && control.touched) return 'This field is required!';else if (control.errors?.emailError && control.touched) return 'Please enter valid email address!';else return '';\n  }\n  customeEmailValidator(control) {\n    const pattern = /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,20}$/;\n    const value = control.value;\n    if (!pattern.test(value) && control.touched) return {\n      emalError: true\n    };else {\n      return null;\n    }\n  }\n  constructor(http) {\n    this.http = http;\n    this.emailIsValid = false;\n    this.form = new FormGroup({\n      email: new FormControl(\"\", [Validators.required, this.customeEmailValidator])\n    });\n  }\n  ngOnInit() {}\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  onUpload() {\n    const filedata = new FormData();\n    filedata.append('image', this.selectedFile, this.selectedFile.name);\n    this.http.post('https://localhost:7000/api/fileupload', filedata).subscribe(res => {\n      console.log(res);\n      // if(this.emailIsValid){\n      //   this.http.post('https://localhost:7000/api/mail/sendmail', this.emailValue)\n      // }\n    });\n  }\n}","map":{"version":3,"mappings":"AAEA,SAA0BA,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;AAOpF,IAAIC,QAAQ,GAAG,EAAE;AACjB,OAAM,MAAOC,aAAa;EAU1BC,QAAQ,CAACC,OAAW;IAChB,IAAGA,OAAO,CAACC,MAAM,EAAEC,QAAQ,IAAIF,OAAO,CAACG,OAAO,EAC5C,OAAO,yBAAyB,CAAC,KAC9B,IAAGH,OAAO,CAACC,MAAM,EAAEG,UAAU,IAAIJ,OAAO,CAACG,OAAO,EACnD,OAAO,mCAAmC,CAAC,KACxC,OAAO,EAAE;EAClB;EAEAE,qBAAqB,CAACL,OAAuB;IACzC,MAAMM,OAAO,GAAG,mCAAmC;IACnD,MAAMC,KAAK,GAAGP,OAAO,CAACO,KAAK;IAC3B,IAAG,CAACD,OAAO,CAACE,IAAI,CAACD,KAAK,CAAC,IAAIP,OAAO,CAACG,OAAO,EACxC,OAAO;MACLM,SAAS,EAAC;KACX,MAEH;MACE,OAAO,IAAI;;EAEjB;EAGAC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IA3BxB,iBAAY,GAAY,KAAK;IAC7B,SAAI,GAAY,IAAIhB,SAAS,CAAC;MAC5BiB,KAAK,EAAC,IAAIlB,WAAW,CAAC,EAAE,EAAC,CAACE,UAAU,CAACM,QAAQ,EAAC,IAAI,CAACG,qBAAqB,CAAC;KAC1E,CAAC;EAwBoC;EAEtCQ,QAAQ,IAER;EAEAC,cAAc,CAACC,KAAU;IACvB,IAAI,CAACC,YAAY,GAASD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;EACjD;EAEAC,QAAQ;IAEN,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACN,YAAY,EAAE,IAAI,CAACA,YAAY,CAACO,IAAI,CAAC;IACnE,IAAI,CAACZ,IAAI,CAACa,IAAI,CAAmB,uCAAuC,EAAEJ,QAAQ,CAAC,CAClFK,SAAS,CAACC,GAAG,IAAE;MACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChB;MACA;MACA;IACF,CAAC,CAAC;EAGJ","names":["FormControl","FormGroup","Validators","emailval","HomeComponent","getError","control","errors","required","touched","emailError","customeEmailValidator","pattern","value","test","emalError","constructor","http","email","ngOnInit","onFileSelected","event","selectedFile","target","files","onUpload","filedata","FormData","append","name","post","subscribe","res","console","log"],"sourceRoot":"","sources":["D:\\Work\\TestTask\\TestTask\\ClientApp\\src\\app\\home\\home.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\n\r\nvar emailval = ''\r\nexport class HomeComponent implements OnInit{\r\n  \r\nselectedFile!: File;\r\n\r\n\r\nemailIsValid: boolean = false;\r\nform:FormGroup =new FormGroup({\r\n  email:new FormControl(\"\",[Validators.required,this.customeEmailValidator])\r\n})\r\n\r\ngetError(control:any) : string {\r\n    if(control.errors?.required && control.touched)\r\n      return 'This field is required!';\r\n    else if(control.errors?.emailError && control.touched)\r\n      return 'Please enter valid email address!';\r\n    else return '';\r\n}\r\n\r\ncustomeEmailValidator(control:AbstractControl) {\r\n    const pattern = /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,20}$/;\r\n    const value = control.value;\r\n    if(!pattern.test(value) && control.touched) \r\n      return {\r\n        emalError:true\r\n      }\r\n    else\r\n    {\r\n      return null;\r\n    } \r\n}\r\n\r\n\r\nconstructor(private http: HttpClient){}\r\n\r\nngOnInit(): void {\r\n\r\n}\r\n\r\nonFileSelected(event: any){\r\n  this.selectedFile = <File>event.target.files[0];\r\n}\r\n\r\nonUpload(){\r\n\r\n  const filedata = new FormData();\r\n  filedata.append('image', this.selectedFile, this.selectedFile.name);\r\n  this.http.post<{ path: string }>('https://localhost:7000/api/fileupload', filedata)\r\n  .subscribe(res=>{\r\n    console.log(res);\r\n    // if(this.emailIsValid){\r\n    //   this.http.post('https://localhost:7000/api/mail/sendmail', this.emailValue)\r\n    // }\r\n  })\r\n\r\n \r\n}\r\n\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}