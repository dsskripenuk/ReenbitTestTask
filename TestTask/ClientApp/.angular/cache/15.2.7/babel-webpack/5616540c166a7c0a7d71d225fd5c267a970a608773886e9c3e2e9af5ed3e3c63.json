{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction HomeComponent_label_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getError(ctx_r0.form.get(\"email\")), \" \");\n  }\n}\nvar emailValue;\nvar emailIsValid = false;\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    getError(control) {\n      if (control.errors?.required && control.touched) return 'This field is required!';else if (control.errors?.emailError && control.touched) return 'Please enter valid email address!';else return '';\n    }\n    customeEmailValidator(control) {\n      const pattern = /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,20}$/;\n      const value = control.value;\n      if (!pattern.test(value) && control.touched) return {\n        emalError: true\n      };else {\n        emailIsValid = true;\n        emailValue = value;\n        return null;\n      }\n    }\n    constructor(http) {\n      this.http = http;\n      this.userEmail = '';\n      this.form = new FormGroup({\n        email: new FormControl(\"\", [Validators.required, this.customeEmailValidator])\n      });\n    }\n    ngOnInit() {}\n    onFileSelected(event) {\n      this.selectedFile = event.target.files[0];\n    }\n    onUpload() {\n      const apiUrl = 'https://testfunc.azurewebsites.net';\n      const filedata = new FormData();\n      filedata.append('image', this.selectedFile, this.selectedFile.name);\n      this.http.post('https://localhost:7000/api/fileupload', filedata).subscribe(res => {\n        console.log(res);\n        if (emailIsValid) this.http.post(apiUrl, {\n          email: this.userEmail\n        }).subscribe(res => {\n          console.log(res);\n        });\n      });\n    }\n  }\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 26,\n    vars: 3,\n    consts: [[1, \"container\", \"px-4\", \"py-5\", \"mx-auto\"], [1, \"card\", \"card0\"], [1, \"d-flex\", \"flex-lg-row\", \"flex-column-reverse\"], [1, \"card\", \"card1\"], [1, \"row\", \"justify-content-center\", \"my-auto\"], [1, \"col-md-8\", \"col-10\", \"my-5\"], [1, \"mb-5\", \"text-center\", \"heading\"], [1, \"msg-info\"], [3, \"formGroup\"], [1, \"form-group\"], [1, \"form-control-label\", \"text-muted\"], [\"type\", \"email\", \"formControlName\", \"email\", \"id\", \"email\", \"name\", \"email\", \"placeholder\", \"Email\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"row\", \"justify-content-center\", \"my-3\", \"px-3\"], [\"type\", \"file\", \"accept\", \".docx\", 1, \"btn-block\", \"btn-color\", 3, \"change\"], [1, \"bottom\", \"text-center\", \"mb-5\"], [\"type\", \"button\", \"value\", \"upload\", 1, \"btn\", \"btn-white\", \"ml-2\", 3, \"click\"], [1, \"card\", \"card2\"], [1, \"my-auto\", \"mx-md-5\", \"px-md-5\", \"right\"], [1, \"text-white\"], [1, \"text-danger\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h3\", 6);\n        i0.ɵɵtext(7, \"Lorem Ipsum\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"h6\", 7);\n        i0.ɵɵtext(9, \"Please enter your email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"form\", 8)(11, \"div\", 9)(12, \"label\", 10);\n        i0.ɵɵtext(13, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.userEmail = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, HomeComponent_label_15_Template, 2, 1, \"label\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 13)(17, \"input\", 14);\n        i0.ɵɵlistener(\"change\", function HomeComponent_Template_input_change_17_listener($event) {\n          return ctx.onFileSelected($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 15)(19, \"input\", 16);\n        i0.ɵɵlistener(\"click\", function HomeComponent_Template_input_click_19_listener() {\n          return ctx.onUpload();\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(20, \"div\", 17)(21, \"div\", 18)(22, \"h3\", 19);\n        i0.ɵɵtext(23, \"We are more than just a company\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"small\", 19);\n        i0.ɵɵtext(25, \"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.userEmail);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.getError(ctx.form.get(\"email\")));\n      }\n    },\n    dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n    encapsulation: 2\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}